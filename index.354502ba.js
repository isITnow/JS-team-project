var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},i=e.parcelRequired7c6;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in a){var i=a[e];delete a[e];var n={id:e,exports:{}};return t[e]=n,i.call(n.exports,n,n.exports),n.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){a[e]=t},e.parcelRequired7c6=i);var n=i("i2Aqx"),l=(n=i("i2Aqx"),i("ldBz7"));n=i("i2Aqx"),l=i("ldBz7"),n=i("i2Aqx");const s=document.querySelector(".pagination__list"),r=document.querySelector(".pagination__btn--left"),o=document.querySelector(".pagination__btn--rigth"),d=document.querySelector(".search__input"),u=document.querySelectorAll(".pagination__btn");let c,g,p="";function m(e,t,a){let i="",[n,l]=function(e){window.innerWidth>=320&&e<3?(c=1,g=5):(c=e-2,g=e+2);return[c,g]}(e),d=a-3;window.innerWidth>=768&&e>=5&&(i+='<li class ="pagination__item" data-page="1">1</li>',i+='<li class ="pagination__item">...</li>');for(let e=n;e<=l;e+=1)i+=`<li class ="pagination__item" data-page="${e}">${e}</li>`;window.innerWidth>=768&&e>=1&&(i+='<li class ="pagination__item">...</li>',i+=`<li class ="pagination__item" data-page="${a}">${a}</li>`),window.innerWidth>=768&&e>=d&&(i=`\n    <li class ="pagination__item" data-page="1">1</li>\n    <li class ="pagination__item">...</li>\n    <li class ="pagination__item" data-page="${a-4}">${a-4}</li>\n    <li class ="pagination__item" data-page="${a-3}">${a-3}</li>\n    <li class ="pagination__item" data-page="${a-2}">${a-2}</li>\n    <li class ="pagination__item" data-page="${a-1}">${a-1}</li>\n    <li class ="pagination__item" data-page="${a}">${a}</li>\n    `),e===a?(o.disabled=!0,o.classList.add("disabled")):(o.disabled=!1,o.classList.remove("disabled")),s.innerHTML=i,o.dataset.page=e+1,r.dataset.page=e-1,function(e){1===e?(r.disabled=!0,r.classList.add("disabled")):(r.disabled=!1,r.classList.remove("disabled"))}(e),_(e)}function y(e){f();let t=e.currentTarget.dataset.page;p=d.value,""===p?((0,n.fetchTrending)(t).then((e=>((0,l.renderGalleryMarkup)(e.results,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(e.results)),e))).then((e=>m(e.page,e.results,e.total_pages))),_(t)):(0,n.fetсhByQuery)(p,t).then((e=>((0,l.renderGalleryMarkup)(e.results,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(e.results)),e))).then((e=>m(e.page,e.results,e.total_pages)))}function _(e){const t=document.querySelector(".pagination__item.pagination__item--active");document.querySelector(`[data-page="${e}"]`).classList.add("pagination__item--active"),t&&t.classList.remove("pagination__item--active")}function f(){window.scrollTo({top:220,behavior:"smooth"})}s.addEventListener("click",(function(e){if(e.preventDefault(),f(),"LI"!==e.target.nodeName)return;let t=e.target.dataset.page;if(p=d.value,""!==p)return void(0,n.fetсhByQuery)(p,t).then((e=>((0,l.renderGalleryMarkup)(e.results,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(e.results)),e))).then((e=>m(e.page,e.results,e.total_pages)));(0,n.fetchTrending)(t).then((e=>((0,l.renderGalleryMarkup)(e.results,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(e.results)),e))).then((e=>m(e.page,e.results,e.total_pages))),_(t)})),u.forEach((e=>{e.addEventListener("click",y)}));var h=i("04jNI");(0,h.loaderToggle)(),localStorage.getItem("genresData")||(0,n.fetchGenres)().then((e=>localStorage.setItem("genresData",JSON.stringify(e.genres)))),(0,n.fetchTrending)(1).then((e=>((0,h.loaderToggle)(),(0,l.renderGalleryMarkup)(e.results,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(e.results)),e))).then((e=>m(e.page,e.results,e.total_pages))).finally((()=>setTimeout((()=>{(0,h.hideLoader)()}),500)));n=i("i2Aqx"),l=i("ldBz7");const v=document.querySelector(".warning-notify"),b=document.querySelector("#form-search"),S=document.querySelector(".pagination__container");b.addEventListener("submit",(function(e){if(e.preventDefault(),q=e.target.elements[0].value.trim(),!q)return v.classList.remove("visually-hidden"),void setTimeout((()=>{v.classList.add("visually-hidden")}),5e3);(0,n.fetсhByQuery)(q,1).then((e=>e.results.length?(S.classList.remove("visually-hidden"),(0,l.renderGalleryMarkup)(e.results,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(e.results)),e):(v.classList.remove("visually-hidden"),setTimeout((()=>{v.classList.add("visually-hidden")}),5e3),void S.classList.add("visually-hidden")))).then((e=>m(e.page,e.results,e.total_pages)))}));let q="";i("7XQqj");const w={btnUp:document.querySelector("#btn-up")};w.btnUp.addEventListener("click",(function(){document.body.scrollIntoView({behavior:"smooth",block:"start"})})),document.addEventListener("scroll",(()=>{document.body.scrollTop>window.innerHeight/2||document.documentElement.scrollTop>window.innerHeight/2?w.btnUp.style.display="block":w.btnUp.style.display="none"})),i("6DdjN"),i("iZvD9"),i("04jNI");
//# sourceMappingURL=index.354502ba.js.map
