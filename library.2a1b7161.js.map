{"mappings":"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","sources":["src/library.js","src/js/library/libraryFunctions.js"],"sourcesContent":["import './js/library/local-storage-theme';\nimport './js/spinner';\nimport './js/modal/modal-footer';\nimport './js/library/libraryFunctions';\nimport { libraryMovieCreator } from './js/library/libraryFunctions';\n\nlibraryMovieCreator();\n","import {\n  renderGalleryMarkup,\n  renderDefaulMarkup,\n} from '../home/renderGalleryMarkup';\n\nimport { renderMovieMarkup } from '../renderModal';\nimport '../pagination/pagination';\nimport { renderPagination } from '../pagination/pagination';\nconst galleryList = document.querySelector('.gallery__list');\nconst myBtns = document.querySelectorAll('.pagination__btn');\nconst WATCHED_BTN = document.querySelector('.js-watchedBtn');\nconst QUEUE_BTN = document.querySelector('.js-queueBtn');\nconst paginationList = document.querySelector('.pagination__container');\nconst btnsLib = document.querySelector('.buttons-list');\npaginationList.addEventListener('click', onClickMyPagination);\nbtnsLib.addEventListener('click', onLibBtnClick);\n\nWATCHED_BTN.classList.add('js-activeBtn');\nQUEUE_BTN.classList.remove('js-activeBtn');\n\nmyBtns.forEach(btn => {\n  btn.addEventListener('click', onClickMyBtn);\n});\n\nexport function getListName() {\n  return WATCHED_BTN.classList.contains('js-activeBtn')\n    ? 'watchedMovies'\n    : 'queueMovies';\n}\n\nexport function libraryMovieCreator(page = 1, listName = 'watchedMovies') {\n  if (!localStorage.getItem(listName)) {\n    renderDefaulMarkup();\n    paginationList.classList.add('visually-hidden');\n    return;\n  }\n\n  const allItemsFromLocaleStorage = JSON.parse(localStorage.getItem(listName));\n\n  let total_pages = Math.ceil(allItemsFromLocaleStorage.length / 9);\n\n  let itemsFromLocaleStorage = getItemsByPage(\n    page,\n    total_pages,\n    allItemsFromLocaleStorage\n  );\n\n  renderGalleryMarkup(\n    itemsFromLocaleStorage,\n    listName === 'watchedMovies' ? 'data-watched' : 'data-queue'\n  );\n  renderPagination(page, itemsFromLocaleStorage, total_pages);\n}\n\nfunction getItemsToShowAndPaginationInfo() {\n  const listName = getListName();\n\n  const allItemsFromLocaleStorage = JSON.parse(localStorage.getItem(listName));\n\n  let total_pages = Math.ceil(allItemsFromLocaleStorage.length / 9);\n  let itemsFromLocaleStorage = getItemsByPage(\n    1,\n    total_pages,\n    allItemsFromLocaleStorage\n  );\n\n  return {\n    listName,\n    total_pages,\n    itemsFromLocaleStorage,\n  };\n}\n\nfunction onLibBtnClick(e) {\n  if (e.target.classList.contains('js-watchedBtn')) {\n    /////// watchedBtn class toggle ///////////\n    if (!e.target.classList.contains('js-activeBtn')) {\n      e.target.classList.add('js-activeBtn');\n      QUEUE_BTN.classList.remove('js-activeBtn');\n    }\n\n    if (localStorage.getItem('watchedMovies')) {\n      const { itemsFromLocaleStorage, total_pages } =\n        getItemsToShowAndPaginationInfo();\n      paginationList.classList.remove('visually-hidden');\n      renderGalleryMarkup(itemsFromLocaleStorage, 'data-watched');\n      renderPagination(1, itemsFromLocaleStorage, total_pages);\n    } else {\n      renderDefaulMarkup();\n      paginationList.classList.add('visually-hidden');\n    }\n  }\n\n  if (e.target.classList.contains('js-queueBtn')) {\n    /////// queueBtn class toggle ///////////\n    if (!e.target.classList.contains('js-activeBtn')) {\n      e.target.classList.add('js-activeBtn');\n      WATCHED_BTN.classList.remove('js-activeBtn');\n    }\n\n    if (localStorage.getItem('queueMovies')) {\n      const { itemsFromLocaleStorage, total_pages } =\n        getItemsToShowAndPaginationInfo();\n      paginationList.classList.remove('visually-hidden');\n      renderGalleryMarkup(itemsFromLocaleStorage, 'data-queue');\n      renderPagination(1, itemsFromLocaleStorage, total_pages);\n    } else {\n      renderDefaulMarkup();\n      paginationList.classList.add('visually-hidden');\n    }\n  }\n}\n\nfunction onClickMyBtn(e) {\n  let page = Number(e.currentTarget.dataset.page);\n\n  const listName = getListName();\n\n  libraryMovieCreator(page, listName);\n}\nfunction onClickMyPagination(e) {\n  if (e.target.nodeName !== 'LI') {\n    return;\n  }\n  let page = Number(e.target.dataset.page);\n\n  const listName = getListName();\n\n  libraryMovieCreator(page, listName);\n}\n\nfunction getItemsByPage(page, total_pages, allItemsFromLocaleStorage) {\n  let end =\n    allItemsFromLocaleStorage.length < 9 ? allItemsFromLocaleStorage.length : 9;\n  let start = 0;\n  if (page === total_pages && page !== 1) {\n    start = 9 * (page - 1);\n    end = (allItemsFromLocaleStorage.length % 9) + start;\n  } else if (page > 1) {\n    start = 9 * (page - 1);\n    end = start + 9;\n  }\n  return allItemsFromLocaleStorage.splice((page - 1) * 9, 9);\n}\n"],"names":["parcelRequire","$1uIgm","$d82793e3178ffec1$var$myBtns","document","querySelector","querySelectorAll","$d82793e3178ffec1$var$WATCHED_BTN","$d82793e3178ffec1$var$QUEUE_BTN","$d82793e3178ffec1$var$paginationList","$d82793e3178ffec1$var$btnsLib","$d82793e3178ffec1$export$13155eae61b6ac41","classList","contains","$d82793e3178ffec1$export$4a2b9da746179d46","page","arguments","length","listName","localStorage","getItem","renderDefaulMarkup","add","allItemsFromLocaleStorage","JSON","parse","total_pages","Math","ceil","itemsFromLocaleStorage","$d82793e3178ffec1$var$getItemsByPage","renderGalleryMarkup","$bOuzt","renderPagination","$d82793e3178ffec1$var$getItemsToShowAndPaginationInfo","$d82793e3178ffec1$var$onClickMyBtn","e","Number","currentTarget","dataset","start","splice","addEventListener","target","nodeName","remove","ref","ref1","itemsFromLocaleStorage1","total_pages1","forEach","btn"],"version":3,"file":"library.2a1b7161.js.map"}