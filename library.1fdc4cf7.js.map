{"mappings":"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","sources":["src/library.js","src/js/library/libraryFunctions.js"],"sourcesContent":["// import './js/pagination/pagination';\nimport './js/library/local-storage-theme';\nimport './js/spinner';\nimport './js/modal/modal-footer';\nimport './js/library/libraryFunctions';\nimport { libraryMovieCreator } from './js/library/libraryFunctions';\n\nlibraryMovieCreator();\n","import {\n  renderGalleryMarkup,\n  renderDefaulMarkup,\n} from '../home/renderGalleryMarkup';\n\nimport { renderMovieMarkup } from '../renderModal';\nimport '../pagination/pagination';\nimport { renderPagination } from '../pagination/pagination';\nconst galleryList = document.querySelector('.gallery__list');\nconst myBtns = document.querySelectorAll('.pagination__btn');\nconst WATCHED_BTN = document.querySelector('.js-watchedBtn');\nconst QUEUE_BTN = document.querySelector('.js-queueBtn');\nconst paginationList = document.querySelector('.pagination__container');\nconst btnsLib = document.querySelector('.buttons-list');\npaginationList.addEventListener('click', onClickMyPagination);\nbtnsLib.addEventListener('click', onLibBtnClick);\n\nWATCHED_BTN.classList.add('js-activeBtn');\nQUEUE_BTN.classList.remove('js-activeBtn');\n\nmyBtns.forEach(btn => {\n  btn.addEventListener('click', onClickMyBtn);\n});\n\nexport function getListName() {\n  return WATCHED_BTN.classList.contains('js-activeBtn')\n    ? 'watchedMovies'\n    : 'queueMovies';\n}\n\nexport function libraryMovieCreator(page = 1, listName = 'watchedMovies') {\n  if (!localStorage.getItem(listName)) {\n    renderDefaulMarkup();\n    paginationList.classList.add('visually-hidden');\n    return;\n  }\n\n  const allItemsFromLocaleStorage = JSON.parse(localStorage.getItem(listName));\n\n  let total_pages = Math.ceil(allItemsFromLocaleStorage.length / 9);\n  console.log(typeof total_pages);\n  let itemsFromLocaleStorage = getItemsByPage(\n    page,\n    total_pages,\n    allItemsFromLocaleStorage\n  );\n\n  renderGalleryMarkup(\n    itemsFromLocaleStorage,\n    listName === 'watchedMovies' ? 'data-watched' : 'data-queue'\n  );\n  renderPagination(page, itemsFromLocaleStorage, total_pages);\n}\n\nfunction getItemsToShowAndPaginationInfo() {\n  const listName = getListName();\n\n  const allItemsFromLocaleStorage = JSON.parse(localStorage.getItem(listName));\n\n  let total_pages = Math.ceil(allItemsFromLocaleStorage.length / 9);\n  let itemsFromLocaleStorage = getItemsByPage(\n    1,\n    total_pages,\n    allItemsFromLocaleStorage\n  );\n\n  return {\n    listName,\n    total_pages,\n    itemsFromLocaleStorage,\n  };\n}\n\nfunction onLibBtnClick(e) {\n  if (e.target.classList.contains('js-watchedBtn')) {\n    /////// watchedBtn class toggle ///////////\n    if (!e.target.classList.contains('js-activeBtn')) {\n      e.target.classList.add('js-activeBtn');\n      QUEUE_BTN.classList.remove('js-activeBtn');\n    }\n\n    console.log('WATCHED', e.target);\n    if (localStorage.getItem('watchedMovies')) {\n      const { itemsFromLocaleStorage, total_pages } =\n        getItemsToShowAndPaginationInfo();\n      paginationList.classList.remove('visually-hidden');\n      renderGalleryMarkup(itemsFromLocaleStorage, 'data-watched');\n      renderPagination(1, itemsFromLocaleStorage, total_pages);\n    } else {\n      renderDefaulMarkup();\n      paginationList.classList.add('visually-hidden');\n    }\n  }\n\n  if (e.target.classList.contains('js-queueBtn')) {\n    /////// queueBtn class toggle ///////////\n    if (!e.target.classList.contains('js-activeBtn')) {\n      e.target.classList.add('js-activeBtn');\n      WATCHED_BTN.classList.remove('js-activeBtn');\n    }\n\n    if (localStorage.getItem('queueMovies')) {\n      const { itemsFromLocaleStorage, total_pages } =\n        getItemsToShowAndPaginationInfo();\n      paginationList.classList.remove('visually-hidden');\n      renderGalleryMarkup(itemsFromLocaleStorage, 'data-queue');\n      renderPagination(1, itemsFromLocaleStorage, total_pages);\n    } else {\n      renderDefaulMarkup();\n      paginationList.classList.add('visually-hidden');\n    }\n  }\n}\n\nfunction onClickMyBtn(e) {\n  let page = Number(e.currentTarget.dataset.page);\n\n  const listName = getListName();\n\n  libraryMovieCreator(page, listName);\n}\nfunction onClickMyPagination(e) {\n  if (e.target.nodeName !== 'LI') {\n    return;\n  }\n  let page = Number(e.target.dataset.page);\n\n  const listName = getListName();\n\n  libraryMovieCreator(page, listName);\n}\n\nfunction getItemsByPage(page, total_pages, allItemsFromLocaleStorage) {\n  let end =\n    allItemsFromLocaleStorage.length < 9 ? allItemsFromLocaleStorage.length : 9;\n  let start = 0;\n  if (page === total_pages && page !== 1) {\n    start = 9 * (page - 1);\n    end = (allItemsFromLocaleStorage.length % 9) + start;\n    console.log(end, allItemsFromLocaleStorage.length % 9, start);\n  } else if (page > 1) {\n    start = 9 * (page - 1);\n    end = start + 9;\n  }\n\n  // let arr = [];\n\n  // for (let i = start; i < end; i++) {\n  //   arr.push(allItemsFromLocaleStorage[i]);\n  // }\n  // console.log(start, end, allItemsFromLocaleStorage.length);\n  // console.log(page, total_pages);\n  // return arr;\n\n  return allItemsFromLocaleStorage.splice((page - 1) * 9, 9);\n\n  // function getItemsByPage(page, total_pages, allItemsFromLocaleStorage) {\n  //   console.log(allItemsFromLocaleStorage);\n  //   let end = 9;\n  //   let start = 0;\n  //   if (page === total_pages && page !== 1) {\n  //     start = start + end;\n  //     end = (allItemsFromLocaleStorage.length % 9) + end;\n  //   }\n  //   let arr = [];\n  //   console.log(start, end, allItemsFromLocaleStorage.length);\n  //   for (let i = start; i < end; i++) {\n  //     arr.push(allItemsFromLocaleStorage[i]);\n  //   }\n  //   return arr;\n  // }\n}\n\n// function getItemsByPage(page, total_pages, allItemsFromLocaleStorage) {\n//   console.log(allItemsFromLocaleStorage);\n//   let end = 9;\n//   let start = 0;\n//   if (page === total_pages && page !== 1) {\n//     start = start + end;\n//     end = (allItemsFromLocaleStorage.length % 9) + end;\n//   }\n//   let arr = [];\n//   console.log(start, end, allItemsFromLocaleStorage.length);\n//   for (let i = start; i < end; i++) {\n//     arr.push(allItemsFromLocaleStorage[i]);\n//   }\n//   return arr;\n// }\n"],"names":["parcelRequire","$ldBz7","document","querySelector","$f74e8630d9ee671a$var$myBtns","querySelectorAll","$f74e8630d9ee671a$var$WATCHED_BTN","$f74e8630d9ee671a$var$QUEUE_BTN","$f74e8630d9ee671a$var$paginationList","$f74e8630d9ee671a$var$btnsLib","$f74e8630d9ee671a$export$13155eae61b6ac41","classList","contains","$f74e8630d9ee671a$export$4a2b9da746179d46","page","listName","localStorage","getItem","renderDefaulMarkup","add","allItemsFromLocaleStorage","JSON","parse","total_pages","Math","ceil","length","console","log","itemsFromLocaleStorage","$f74e8630d9ee671a$var$getItemsByPage","renderGalleryMarkup","$8huCE","renderPagination","$f74e8630d9ee671a$var$getItemsToShowAndPaginationInfo","$f74e8630d9ee671a$var$onClickMyBtn","e","Number","currentTarget","dataset","end","start","splice","addEventListener","target","nodeName","remove","forEach","btn"],"version":3,"file":"library.1fdc4cf7.js.map"}