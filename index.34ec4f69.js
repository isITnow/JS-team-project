!function(){var e="https://api.themoviedb.org/3",t="api_key=d70849b39c7b399ded2dffef6ee1baa4";function n(n,a){return fetch("".concat(e,"/search/movie?").concat(t,"&language=en-US&page=").concat(a,"&include_adult=false&query=").concat(n)).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).catch((function(e){return console.log(e)}))}var a=document.querySelector(".gallery__list");function o(e){var t=e.reduce((function(e,t){var n=t.id,a=t.poster_path,o=t.name,c=t.title,r=t.release_date,l=t.vote_average,i=t.genre_ids,s=[];return JSON.parse(localStorage.getItem("genresData")).forEach((function(e){i.includes(e.id)&&s.push(e.name)})),e+'<li class="gallery__item" id='.concat(n,'>\n          <a class="gallery__link" href="//">\n              <img class="gallery__image" src="https://image.tmdb.org/t/p/original').concat(a,'" alt="').concat(c||o,'" width="100"/>\n              <h2 class="gallery__title">').concat(c||o,"</h2>\n              <p>").concat(s.length>3?s.splice(0,2).join(", ")+", Others":s.join(", "),'</p>\n                  <p class="gallery__release">').concat(r.slice(0,4),'</p>\n                  <span class="gallery__rating">').concat(l.toFixed(1),"</span>\n           </a>\n              </li>")}),"");a.innerHTML=t}var c;fetch("".concat(e,"/genre/movie/list?").concat(t,"&language=en-US")).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).catch((function(e){return console.log(e)})).then((function(e){return localStorage.setItem("genresData",JSON.stringify(e.genres))})),(c=1,fetch("".concat(e,"/trending/movie/week?&").concat(t,"&page=").concat(c)).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){return o(e.results)}));var r=document.querySelector(".warning-notify");document.querySelector("#form-search").addEventListener("submit",(function(e){if(e.preventDefault(),!(l=e.target.elements[0].value))return r.classList.remove("visually-hidden"),void setTimeout((function(){r.classList.add("visually-hidden")}),5e3);n(l,1).then((function(e){o(e.results)}))}));var l="";!function(){var e={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]")};function t(){e.modal.classList.toggle("is-hidden")}e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",t)}()}();
//# sourceMappingURL=index.34ec4f69.js.map
