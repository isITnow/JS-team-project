{"mappings":"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","sources":["src/library.js","node_modules/@swc/helpers/lib/_type_of.js","src/js/library/libraryFunctions.js"],"sourcesContent":["// import './js/pagination/pagination';\nimport './js/library/local-storage-theme';\nimport './js/spinner';\nimport './js/modal/modal-footer';\nimport './js/library/libraryFunctions';\nimport { libraryMovieCreator } from './js/library/libraryFunctions';\n\nlibraryMovieCreator();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _typeof;\nfunction _typeof(obj) {\n    \"@swc/helpers - typeof\";\n    return obj && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n}\n;\n","import {\n  renderGalleryMarkup,\n  renderDefaulMarkup,\n} from '../home/renderGalleryMarkup';\n\nimport { renderMovieMarkup } from '../renderModal';\nimport '../pagination/pagination';\nimport { renderPagination } from '../pagination/pagination';\nconst galleryList = document.querySelector('.gallery__list');\nconst myBtns = document.querySelectorAll('.pagination__btn');\nconst WATCHED_BTN = document.querySelector('.js-watchedBtn');\nconst QUEUE_BTN = document.querySelector('.js-queueBtn');\nconst paginationList = document.querySelector('.pagination__container');\nconst btnsLib = document.querySelector('.buttons-list');\npaginationList.addEventListener('click', onClickMyPagination);\nbtnsLib.addEventListener('click', onLibBtnClick);\n\nWATCHED_BTN.classList.add('js-activeBtn');\nQUEUE_BTN.classList.remove('js-activeBtn');\n\nmyBtns.forEach(btn => {\n  btn.addEventListener('click', onClickMyBtn);\n});\n\nexport function getListName() {\n  return WATCHED_BTN.classList.contains('js-activeBtn')\n    ? 'watchedMovies'\n    : 'queueMovies';\n}\n\nexport function libraryMovieCreator(page = 1, listName = 'watchedMovies') {\n  if (!localStorage.getItem(listName)) {\n    renderDefaulMarkup();\n    paginationList.classList.add('visually-hidden');\n    return;\n  }\n\n  const allItemsFromLocaleStorage = JSON.parse(localStorage.getItem(listName));\n\n  let total_pages = Math.ceil(allItemsFromLocaleStorage.length / 9);\n  console.log(typeof total_pages);\n  let itemsFromLocaleStorage = getItemsByPage(\n    page,\n    total_pages,\n    allItemsFromLocaleStorage\n  );\n\n  renderGalleryMarkup(\n    itemsFromLocaleStorage,\n    listName === 'watchedMovies' ? 'data-watched' : 'data-queue'\n  );\n  renderPagination(page, itemsFromLocaleStorage, total_pages);\n}\n\nfunction getItemsToShowAndPaginationInfo() {\n  const listName = getListName();\n\n  const allItemsFromLocaleStorage = JSON.parse(localStorage.getItem(listName));\n\n  let total_pages = Math.ceil(allItemsFromLocaleStorage.length / 9);\n  let itemsFromLocaleStorage = getItemsByPage(\n    1,\n    total_pages,\n    allItemsFromLocaleStorage\n  );\n\n  return {\n    listName,\n    total_pages,\n    itemsFromLocaleStorage,\n  };\n}\n\nfunction onLibBtnClick(e) {\n  if (e.target.classList.contains('js-watchedBtn')) {\n    /////// watchedBtn class toggle ///////////\n    if (!e.target.classList.contains('js-activeBtn')) {\n      e.target.classList.add('js-activeBtn');\n      QUEUE_BTN.classList.remove('js-activeBtn');\n    }\n\n    console.log('WATCHED', e.target);\n    if (localStorage.getItem('watchedMovies')) {\n      const { itemsFromLocaleStorage, total_pages } =\n        getItemsToShowAndPaginationInfo();\n      paginationList.classList.remove('visually-hidden');\n      renderGalleryMarkup(itemsFromLocaleStorage, 'data-watched');\n      renderPagination(1, itemsFromLocaleStorage, total_pages);\n    } else {\n      renderDefaulMarkup();\n      paginationList.classList.add('visually-hidden');\n    }\n  }\n\n  if (e.target.classList.contains('js-queueBtn')) {\n    /////// queueBtn class toggle ///////////\n    if (!e.target.classList.contains('js-activeBtn')) {\n      e.target.classList.add('js-activeBtn');\n      WATCHED_BTN.classList.remove('js-activeBtn');\n    }\n\n    if (localStorage.getItem('queueMovies')) {\n      const { itemsFromLocaleStorage, total_pages } =\n        getItemsToShowAndPaginationInfo();\n      paginationList.classList.remove('visually-hidden');\n      renderGalleryMarkup(itemsFromLocaleStorage, 'data-queue');\n      renderPagination(1, itemsFromLocaleStorage, total_pages);\n    } else {\n      renderDefaulMarkup();\n      paginationList.classList.add('visually-hidden');\n    }\n  }\n}\n\nfunction onClickMyBtn(e) {\n  let page = Number(e.currentTarget.dataset.page);\n\n  const listName = getListName();\n\n  libraryMovieCreator(page, listName);\n}\nfunction onClickMyPagination(e) {\n  if (e.target.nodeName !== 'LI') {\n    return;\n  }\n  let page = Number(e.target.dataset.page);\n\n  const listName = getListName();\n\n  libraryMovieCreator(page, listName);\n}\n\nfunction getItemsByPage(page, total_pages, allItemsFromLocaleStorage) {\n  let end =\n    allItemsFromLocaleStorage.length < 9 ? allItemsFromLocaleStorage.length : 9;\n  let start = 0;\n  if (page === total_pages && page !== 1) {\n    start = 9 * (page - 1);\n    end = (allItemsFromLocaleStorage.length % 9) + start;\n    console.log(end, allItemsFromLocaleStorage.length % 9, start);\n  } else if (page > 1) {\n    start = 9 * (page - 1);\n    end = start + 9;\n  }\n\n  // let arr = [];\n\n  // for (let i = start; i < end; i++) {\n  //   arr.push(allItemsFromLocaleStorage[i]);\n  // }\n  // console.log(start, end, allItemsFromLocaleStorage.length);\n  // console.log(page, total_pages);\n  // return arr;\n\n  return allItemsFromLocaleStorage.splice((page - 1) * 9, 9);\n\n  // function getItemsByPage(page, total_pages, allItemsFromLocaleStorage) {\n  //   console.log(allItemsFromLocaleStorage);\n  //   let end = 9;\n  //   let start = 0;\n  //   if (page === total_pages && page !== 1) {\n  //     start = start + end;\n  //     end = (allItemsFromLocaleStorage.length % 9) + end;\n  //   }\n  //   let arr = [];\n  //   console.log(start, end, allItemsFromLocaleStorage.length);\n  //   for (let i = start; i < end; i++) {\n  //     arr.push(allItemsFromLocaleStorage[i]);\n  //   }\n  //   return arr;\n  // }\n}\n\n// function getItemsByPage(page, total_pages, allItemsFromLocaleStorage) {\n//   console.log(allItemsFromLocaleStorage);\n//   let end = 9;\n//   let start = 0;\n//   if (page === total_pages && page !== 1) {\n//     start = start + end;\n//     end = (allItemsFromLocaleStorage.length % 9) + end;\n//   }\n//   let arr = [];\n//   console.log(start, end, allItemsFromLocaleStorage.length);\n//   for (let i = start; i < end; i++) {\n//     arr.push(allItemsFromLocaleStorage[i]);\n//   }\n//   return arr;\n// }\n"],"names":["parcelRequire","Object","defineProperty","$f59351132b4b3cee$exports","value","default","obj","constructor","Symbol","$d82793e3178ffec1$var$myBtns","document","querySelector","querySelectorAll","$d82793e3178ffec1$var$WATCHED_BTN","$d82793e3178ffec1$var$QUEUE_BTN","$d82793e3178ffec1$var$paginationList","$d82793e3178ffec1$var$btnsLib","$d82793e3178ffec1$export$13155eae61b6ac41","classList","contains","$d82793e3178ffec1$export$4a2b9da746179d46","page","arguments","length","listName","localStorage","getItem","$1uIgm","renderDefaulMarkup","add","allItemsFromLocaleStorage","JSON","parse","total_pages","Math","ceil","console","log","$parcel$interopDefault","itemsFromLocaleStorage","$d82793e3178ffec1$var$getItemsByPage","renderGalleryMarkup","$bOuzt","renderPagination","$d82793e3178ffec1$var$getItemsToShowAndPaginationInfo","$d82793e3178ffec1$var$onClickMyBtn","e","Number","currentTarget","dataset","end","start","splice","addEventListener","target","nodeName","remove","ref","ref1","itemsFromLocaleStorage1","total_pages1","forEach","btn"],"version":3,"file":"library.0c80182b.js.map"}