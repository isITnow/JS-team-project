{"mappings":"oeACAA,EAAA,S,sBCDA,IAAAC,EAAAD,EAAA,S,sDAMoBE,SAASC,cAAc,kBAA3C,MACMC,EAASF,SAASG,iBAAiB,oBACnCC,EAAcJ,SAASC,cAAc,kBACrCI,EAAYL,SAASC,cAAc,gBACnCK,EAAiBN,SAASC,cAAc,0BACxCM,EAAUP,SAASC,cAAc,iBAWhC,SAASO,EAAoBC,EAAO,GAGzC,GAFAL,EAAYM,UAAUC,IAAI,gBAC1BN,EAAUK,UAAUE,OAAO,iBACtBC,aAAaC,QAAQ,iBAExB,YADA,EAAAf,EAAAgB,sBAGF,MAAMC,EAA4BC,KAAKC,MACrCL,aAAaC,QAAQ,kBAEvB,IAAIK,EAAcC,KAAKC,KAAKL,EAA0BM,OAAS,GAC/DC,QAAQC,WAAWL,GACnB,IAAIM,EAwDN,SAAwBC,EAAMC,EAAaC,GACzC,IAAIC,EACFD,EAA0BN,OAAS,EAAIM,EAA0BN,OAAS,EACxEQ,EAAQ,EACRJ,IAASC,GAAwB,IAATD,GAC1BI,EAAQ,GAAKJ,EAAO,GACpBG,EAAMD,EAA2BN,OAAS,EAAKQ,EAC/CP,QAAQC,IAAIK,EAAKD,EAA0BN,OAAS,EAAGQ,IAC9CJ,EAAO,IAChBI,EAAQ,GAAKJ,EAAO,GACpBG,EAAMC,EAAQ,GAGhB,IAAIC,EAAM,GAEV,IAAK,IAAIC,EAAIF,EAAOE,EAAIH,EAAKG,IAC3BD,EAAIE,KAAKL,EAA0BI,IAIrC,OAFAT,QAAQC,IAAIM,EAAOD,EAAKD,EAA0BN,QAClDC,QAAQC,IAAIE,EAAMC,GACXI,EA5EsBG,CAC3BzB,EACAU,EACAH,GAEFO,QAAQC,IAAIC,IACZ,EAAA1B,EAAAoC,qBAAoBV,EAAwB,iBAC5C,EAAAW,EAAAC,kBAAiB5B,EAAMgB,EAAwBN,GAuBjD,SAASmB,EAAcC,GAEhBA,EAAEC,OAAO9B,UAAU+B,SAAS,kBAC/BF,EAAEC,OAAO9B,UAAUC,IAAI,gBACvBN,EAAUK,UAAUE,OAAO,iBAGxB2B,EAAEC,OAAO9B,UAAU+B,SAAS,kBAC/BF,EAAEC,OAAO9B,UAAUC,IAAI,gBACvBP,EAAYM,UAAUE,OAAO,iBAIjC,SAAS8B,EAAaH,GAEpB/B,EADWmC,OAAOJ,EAAEK,cAAcC,QAAQpC,OAjE5CH,EAAewC,iBAAiB,SAoEhC,SAA6BP,GAC3B,GAA0B,OAAtBA,EAAEC,OAAOO,SACX,OAEF,IAAItC,EAAO8B,EAAEC,OAAOK,QAAQpC,KAC5Bc,QAAQC,IAAIe,EAAEC,OAAOK,QAAQpC,MAC7BD,EAAoBC,MAzEtBF,EAAQuC,iBAAiB,SA8BzB,SAAuBP,GACrB,GAAIA,EAAEC,OAAO9B,UAAU+B,SAAS,iBAC9B,GAAI5B,aAAaC,QAAQ,iBAAkB,CACzC,MAAMkC,EAAgB/B,KAAKC,MAAML,aAAaC,QAAQ,mBACtD,EAAAf,EAAAoC,qBAAoBa,EAAe,qBAEnC,EAAAjD,EAAAgB,sBAIJ,GAAIwB,EAAEC,OAAO9B,UAAU+B,SAAS,eAC9B,GAAI5B,aAAaC,QAAQ,eAAgB,CACvC,MAAMmC,EAAchC,KAAKC,MAAML,aAAaC,QAAQ,iBACpD,EAAAf,EAAAoC,qBAAoBc,EAAa,mBAEjC,EAAAlD,EAAAgB,yBA5CNX,EAAY0C,iBAAiB,QAASR,GACtCjC,EAAUyC,iBAAiB,QAASR,GAEpCpC,EAAOgD,SAAQC,IACbA,EAAIL,iBAAiB,QAASJ,MDZhClC","sources":["src/library.js","src/js/library/libraryFunctions.js"],"sourcesContent":["// import './js/pagination/pagination';\nimport './js/library/local-storage-theme';\nimport './js/spinner';\nimport './js/modal/modal-footer';\nimport './js/library/libraryFunctions';\nimport { libraryMovieCreator } from './js/library/libraryFunctions';\n\nlibraryMovieCreator();\n","import { renderGalleryMarkup } from '../home/renderGalleryMarkup';\nimport { renderDefaulMarkup } from '../home/renderGalleryMarkup';\n\nimport { renderMovieMarkup } from '../renderModal';\nimport '../pagination/pagination';\nimport { renderPagination } from '../pagination/pagination';\nconst galleryList = document.querySelector('.gallery__list');\nconst myBtns = document.querySelectorAll('.pagination__btn');\nconst WATCHED_BTN = document.querySelector('.js-watchedBtn');\nconst QUEUE_BTN = document.querySelector('.js-queueBtn');\nconst paginationList = document.querySelector('.pagination__container');\nconst btnsLib = document.querySelector('.buttons-list');\n\npaginationList.addEventListener('click', onClickMyPagination);\nbtnsLib.addEventListener('click', onLibBtnClick);\nWATCHED_BTN.addEventListener('click', onClickToggle);\nQUEUE_BTN.addEventListener('click', onClickToggle);\n\nmyBtns.forEach(btn => {\n  btn.addEventListener('click', onClickMyBtn);\n});\n\nexport function libraryMovieCreator(page = 1) {\n  WATCHED_BTN.classList.add('js-activeBtn');\n  QUEUE_BTN.classList.remove('js-activeBtn');\n  if (!localStorage.getItem('watchedMovies')) {\n    renderDefaulMarkup();\n    return;\n  }\n  const allItemsFromLocaleStorage = JSON.parse(\n    localStorage.getItem('watchedMovies')\n  );\n  let total_pages = Math.ceil(allItemsFromLocaleStorage.length / 9);\n  console.log(typeof total_pages);\n  let itemsFromLocaleStorage = getItemsByPage(\n    page,\n    total_pages,\n    allItemsFromLocaleStorage\n  );\n  console.log(itemsFromLocaleStorage);\n  renderGalleryMarkup(itemsFromLocaleStorage, 'data-watched');\n  renderPagination(page, itemsFromLocaleStorage, total_pages);\n}\n\nfunction onLibBtnClick(e) {\n  if (e.target.classList.contains('js-watchedBtn')) {\n    if (localStorage.getItem('watchedMovies')) {\n      const parsedWatched = JSON.parse(localStorage.getItem('watchedMovies'));\n      renderGalleryMarkup(parsedWatched, 'data-watched');\n    } else {\n      renderDefaulMarkup();\n    }\n  }\n\n  if (e.target.classList.contains('js-queueBtn')) {\n    if (localStorage.getItem('queueMovies')) {\n      const parsedQueue = JSON.parse(localStorage.getItem('queueMovies'));\n      renderGalleryMarkup(parsedQueue, 'data-queue');\n    } else {\n      renderDefaulMarkup();\n    }\n  }\n}\n\nfunction onClickToggle(e) {\n  /////// watchedBtn class toggle ///////////\n  if (!e.target.classList.contains('js-activeBtn')) {\n    e.target.classList.add('js-activeBtn');\n    QUEUE_BTN.classList.remove('js-activeBtn');\n  }\n  /////// queueBtn class toggle ///////////\n  if (!e.target.classList.contains('js-activeBtn')) {\n    e.target.classList.add('js-activeBtn');\n    WATCHED_BTN.classList.remove('js-activeBtn');\n  }\n}\n\nfunction onClickMyBtn(e) {\n  let page = Number(e.currentTarget.dataset.page);\n  libraryMovieCreator(page);\n}\nfunction onClickMyPagination(e) {\n  if (e.target.nodeName !== 'LI') {\n    return;\n  }\n  let page = e.target.dataset.page;\n  console.log(e.target.dataset.page);\n  libraryMovieCreator(page);\n}\n\nfunction getItemsByPage(page, total_pages, allItemsFromLocaleStorage) {\n  let end =\n    allItemsFromLocaleStorage.length < 9 ? allItemsFromLocaleStorage.length : 9;\n  let start = 0;\n  if (page === total_pages && page !== 1) {\n    start = 9 * (page - 1);\n    end = (allItemsFromLocaleStorage.length % 9) + start;\n    console.log(end, allItemsFromLocaleStorage.length % 9, start);\n  } else if (page > 1) {\n    start = 9 * (page - 1);\n    end = start + 9;\n  }\n\n  let arr = [];\n\n  for (let i = start; i < end; i++) {\n    arr.push(allItemsFromLocaleStorage[i]);\n  }\n  console.log(start, end, allItemsFromLocaleStorage.length);\n  console.log(page, total_pages);\n  return arr;\n\n  function getItemsByPage(page, total_pages, allItemsFromLocaleStorage) {\n    console.log(allItemsFromLocaleStorage);\n    let end = 9;\n    let start = 0;\n    if (page === total_pages && page !== 1) {\n      start = start + end;\n      end = (allItemsFromLocaleStorage.length % 9) + end;\n    }\n    let arr = [];\n    console.log(start, end, allItemsFromLocaleStorage.length);\n    for (let i = start; i < end; i++) {\n      arr.push(allItemsFromLocaleStorage[i]);\n    }\n    return arr;\n  }\n}\n"],"names":["parcelRequire","$ldBz7","document","querySelector","$f74e8630d9ee671a$var$myBtns","querySelectorAll","$f74e8630d9ee671a$var$WATCHED_BTN","$f74e8630d9ee671a$var$QUEUE_BTN","$f74e8630d9ee671a$var$paginationList","$f74e8630d9ee671a$var$btnsLib","$f74e8630d9ee671a$export$4a2b9da746179d46","page","classList","add","remove","localStorage","getItem","renderDefaulMarkup","allItemsFromLocaleStorage","JSON","parse","total_pages","Math","ceil","length","console","log","itemsFromLocaleStorage","page1","total_pages1","allItemsFromLocaleStorage1","end1","start1","arr1","i1","push","$f74e8630d9ee671a$var$getItemsByPage","renderGalleryMarkup","$8huCE","renderPagination","$f74e8630d9ee671a$var$onClickToggle","e","target","contains","$f74e8630d9ee671a$var$onClickMyBtn","Number","currentTarget","dataset","addEventListener","nodeName","parsedWatched","parsedQueue","forEach","btn"],"version":3,"file":"library.f21f6dce.js.map"}