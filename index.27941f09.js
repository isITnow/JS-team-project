!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r),r.register("8slrw",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return e}})),r.register("7AJDX",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}})),r.register("ifqQW",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),r.register("auk6i",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(!e)return;if("string"==typeof e)return a.default(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a.default(e,t)};var n,a=(n=r("8NIkP"))&&n.__esModule?n:{default:n}})),r.register("8NIkP",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}}));var i=r("5YnpJ"),o=(i=r("5YnpJ"),r("1uIgm")),l={};Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,t){return s.default(e)||u.default(e,t)||d.default(e,t)||c.default()};var s=p(r("8slrw")),u=p(r("7AJDX")),c=p(r("ifqQW")),d=p(r("auk6i"));function p(e){return e&&e.__esModule?e:{default:e}}i=r("5YnpJ"),o=r("1uIgm"),i=r("5YnpJ");var g,f,_=document.querySelector(".pagination__list"),m=document.querySelector(".pagination__btn--left"),y=document.querySelector(".pagination__btn--rigth"),v=document.querySelector(".search__input"),h=document.querySelectorAll(".pagination__btn"),b="";function S(t,n,a){var r="",i=e(l)(function(e){window.innerWidth>=320&&e<3?(g=1,f=5):(g=e-2,f=e+2);return[g,f]}(t),2),o=i[0],s=i[1],u=a-3;window.innerWidth>=768&&t>=5&&(r+='\n    <li class ="pagination__item" data-page="1">1</li>',r+='\n    <li class ="pagination__item">...</li>');for(var c=o;c<=s;c+=1)r+='\n      <li class ="pagination__item" data-page="'.concat(c,'" >\n        ').concat(c,"\n      </li>  \n      \n      ");window.innerWidth>=768&&t>=1&&(r+='\n    <li class ="pagination__item">...</li>',r+='\n    <li class ="pagination__item" data-page="'.concat(a,'">').concat(a,"</li>")),window.innerWidth>=768&&t>=u&&(r='\n    <li class ="pagination__item" data-page="1">1</li>\n    <li class ="pagination__item">...</li>\n    <li class ="pagination__item" data-page="'.concat(a-4,'">').concat(a-4,'</li>\n    <li class ="pagination__item" data-page="').concat(a-3,'">').concat(a-3,'</li>\n    <li class ="pagination__item" data-page="').concat(a-2,'">').concat(a-2,'</li>\n    <li class ="pagination__item" data-page="').concat(a-1,'">').concat(a-1,'</li>\n    <li class ="pagination__item" data-page="').concat(a,'">').concat(a,"</li>\n    ")),t===a?(y.disabled=!0,y.classList.add("disabled")):(y.disabled=!1,y.classList.remove("disabled")),_.innerHTML=r,y.dataset.page=t+1,m.dataset.page=t-1,function(e){1===e?(m.disabled=!0,m.classList.add("disabled")):(m.disabled=!1,m.classList.remove("disabled"))}(t),q(t)}function w(e){L();var t=e.currentTarget.dataset.page;""===(b=v.value)?((0,i.fetchTrending)(t).then((function(e){var t=e.page,n=e.results,a=e.total_pages;return(0,o.renderGalleryMarkup)(t,n,a,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(n)),{page:t,results:n,total_pages:a}})).then((function(e){var t=e.page;e.results;return S(t,0,e.total_pages)})),q(t)):(0,i.fetсhByQuery)(b,t).then((function(e){var t=e.page,n=e.results,a=e.total_pages;return(0,o.renderGalleryMarkup)(t,n,a,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(n)),{page:t,results:n,total_pages:a}})).then((function(e){var t=e.page;e.results;return S(t,0,e.total_pages)}))}function q(e){var t=document.querySelector(".pagination__item.pagination__item--active");document.querySelector('[data-page="'.concat(e,'"]')).classList.add("pagination__item--active"),t&&t.classList.remove("pagination__item--active")}function L(){window.scrollTo({top:220,behavior:"smooth"})}_.addEventListener("click",(function(e){if(e.preventDefault(),L(),"LI"!==e.target.nodeName)return;var t=e.target.dataset.page;if(""!==(b=v.value))return void(0,i.fetсhByQuery)(b,t).then((function(e){var t=e.page,n=e.results,a=e.total_pages;return(0,o.renderGalleryMarkup)(t,n,a,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(n)),{page:t,results:n,total_pages:a}})).then((function(e){return S(e.page,e.results,e.total_pages)}));(0,i.fetchTrending)(t).then((function(e){var t=e.page,n=e.results,a=e.total_pages;return(0,o.renderGalleryMarkup)(t,n,a,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(n)),{page:t,results:n,total_pages:a}})).then((function(e){return S(e.page,e.results,e.total_pages)})),q(t)})),h.forEach((function(e){e.addEventListener("click",w)}));var I=r("j1lrD");(0,I.loaderToggle)(),localStorage.getItem("genresData")||(0,i.fetchGenres)().then((function(e){return localStorage.setItem("genresData",JSON.stringify(e.genres))})),(0,i.fetchTrending)(1).then((function(e){var t=e.page,n=e.results,a=e.total_pages;return(0,I.loaderToggle)(),(0,o.renderGalleryMarkup)(t,n,a,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(n)),{page:t,results:n,total_pages:a}})).then((function(e){var t=e.page;e.results;return S(t,0,e.total_pages)})).finally((function(){return setTimeout((function(){(0,I.hideLoader)()}),500)}));i=r("5YnpJ"),o=r("1uIgm");var M=document.querySelector(".warning-notify"),O=document.querySelector("#form-search"),T=document.querySelector(".pagination__container");O.addEventListener("submit",(function(e){if(e.preventDefault(),!(k=e.target.elements[0].value.trim()))return M.classList.remove("visually-hidden"),void setTimeout((function(){M.classList.add("visually-hidden")}),5e3);(0,i.fetсhByQuery)(k,1).then((function(e){var t=e.page,n=e.results,a=e.total_pages;return n.length?(T.classList.remove("visually-hidden"),(0,o.renderGalleryMarkup)(t,n,a,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(n)),{page:t,results:n,total_pages:a}):(M.classList.remove("visually-hidden"),setTimeout((function(){M.classList.add("visually-hidden")}),5e3),void T.classList.add("visually-hidden"))})).then((function(e){var t=e.page;e.results;return S(t,0,e.total_pages)}))}));var k="";r("7k6zZ");var x={btnUp:document.querySelector("#btn-up")};x.btnUp.addEventListener("click",(function(){document.body.scrollIntoView({behavior:"smooth",block:"start"})})),document.addEventListener("scroll",(function(){document.body.scrollTop>window.innerHeight/2||document.documentElement.scrollTop>window.innerHeight/2?x.btnUp.style.display="block":x.btnUp.style.display="none"})),r("j9iUH"),r("7tQI6"),r("j1lrD")}();
//# sourceMappingURL=index.27941f09.js.map
