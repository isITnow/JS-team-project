{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,uDAOA,EAAAC,EAAAC,gBAEMC,aAAaC,QAAQ,gBAIzB,EAAAL,EAAAM,eAAcC,MAAKC,GACjBJ,aAAaK,QAAQ,aAAcC,KAAKC,UAAUH,EAAKI,YAM3D,EAAAZ,EAAAa,eAdW,GAeRN,MAAKC,KACJ,EAAAN,EAAAC,iBACA,EAAAW,EAAAC,qBAAoBP,EAAKQ,QAAS,iBAClCZ,aAAaK,QAAQ,eAAgBC,KAAKC,UAAUH,EAAKQ,UAClDR,KAERD,MAAKC,IAAQ,EAAAS,EAAAC,kBAAiBV,EAAKW,KAAMX,EAAKQ,QAASR,EAAKY,eAC5DC,SAAQ,IACPC,YAAW,MACT,EAAApB,EAAAqB,gBACC,OC/BPvB,EAAAC,EAAA,S,0BAGA,MAAMuB,EAAYC,SAASC,cAAc,mBACnCC,EAASF,SAASC,cAAc,gBAChCE,EAAeH,SAASC,cAAc,0BAE5CC,EAAOE,iBAAiB,UAIxB,SAAwBC,GAGtB,GAFAA,EAAIC,iBACJC,EAAQF,EAAIG,OAAOC,SAAS,GAAGC,MAAMC,QAChCJ,EAKH,OAJAR,EAAUa,UAAUC,OAAO,wBAC3BhB,YAAW,KACTE,EAAUa,UAAUE,IAAI,qBACvB,MAGL,EAAAvC,EAAA,cAAagC,EAbJ,GAcNzB,MAAOC,GACDA,EAAKQ,QAAQwB,QAQlBZ,EAAaS,UAAUC,OAAO,oBAC9B,EAAAxB,EAAAC,qBAAoBP,EAAKQ,QAAS,cAClCZ,aAAaK,QAAQ,aAAcC,KAAKC,UAAUH,EAAKQ,UAC/CR,IAVNgB,EAAUa,UAAUC,OAAO,mBAC3BhB,YAAW,KACTE,EAAUa,UAAUE,IAAI,qBACvB,UACHX,EAAaS,UAAUE,IAAI,sBAQ9BhC,MAAMC,IACP,EAAAS,EAAAC,kBAAiBV,EAAKW,KAAMX,EAAKQ,QAASR,EAAKY,kBA7BnD,IACIY,EAAQ,G,sBCTZ,MAAMS,EAAO,CACXC,MAAOjB,SAASC,cAAc,YAEhCe,EAAKC,MAAMb,iBAAiB,SAC5B,WACEJ,SAASkB,KAAKC,eAAe,CAC3BC,SAAU,SACVC,MAAO,aAIXrB,SAASI,iBAAiB,UAAU,KAEhCJ,SAASkB,KAAKI,UAAYC,OAAOC,YAAc,GAC/CxB,SAASyB,gBAAgBH,UAAYC,OAAOC,YAAc,EAE1DR,EAAKC,MAAMS,MAAMC,QAAU,QAE3BX,EAAKC,MAAMS,MAAMC,QAAU,U","sources":["src/js/home/filmsByPopular.js","src/js/home/searchByQuery.js","src/js/plugins/scroll-to-top.js"],"sourcesContent":["import { fetchTrending } from '../api/fetch';\nimport { fetchGenres } from '../api/fetch';\nimport { renderGalleryMarkup } from './renderGalleryMarkup';\nimport { renderPagination } from '../pagination/pagination';\nimport { loaderToggle, hideLoader } from '../spinner';\n\nlet page = 1;\nloaderToggle();\nfunction checkGenresLocalStorage() {\n  if (localStorage.getItem('genresData')) {\n    return;\n  }\n\n  fetchGenres().then(data =>\n    localStorage.setItem('genresData', JSON.stringify(data.genres))\n  );\n}\n\ncheckGenresLocalStorage();\n\nfetchTrending(page)\n  .then(data => {\n    loaderToggle();\n    renderGalleryMarkup(data.results, 'data-trending');\n    localStorage.setItem('popularFilms', JSON.stringify(data.results));\n    return data;\n  })\n  .then(data => renderPagination(data.page, data.results, data.total_pages))\n  .finally(() =>\n    setTimeout(() => {\n      hideLoader();\n    }, 500)\n  );\n","import { fetсhByQuery } from '../api/fetch';\nimport { renderGalleryMarkup } from './renderGalleryMarkup';\nimport { renderPagination } from '../pagination/pagination';\nconst warningEl = document.querySelector('.warning-notify');\nconst formEl = document.querySelector('#form-search');\nconst paginationEl = document.querySelector('.pagination__container');\n\nformEl.addEventListener('submit', onSearchSubmit);\nlet page = 1;\nlet query = '';\n\nfunction onSearchSubmit(evt) {\n  evt.preventDefault();\n  query = evt.target.elements[0].value.trim();\n  if (!query) {\n    warningEl.classList.remove('visually-hidden');\n    setTimeout(() => {\n      warningEl.classList.add('visually-hidden');\n    }, 5000);\n    return;\n  }\n  fetсhByQuery(query, page)\n    .then(( data ) => {\n      if (!data.results.length) {\n        warningEl.classList.remove('visually-hidden');\n        setTimeout(() => {\n          warningEl.classList.add('visually-hidden');\n        }, 5000);\n        paginationEl.classList.add('visually-hidden');\n        return;\n      }\n      paginationEl.classList.remove('visually-hidden');\n      renderGalleryMarkup(data.results, 'data-query');\n      localStorage.setItem('queryFilms', JSON.stringify(data.results));\n      return  data \n    })\n    .then((data) =>\n    renderPagination(data.page, data.results, data.total_pages)\n  )\n}\n","const refs = {\n  btnUp: document.querySelector('#btn-up'),\n};\nrefs.btnUp.addEventListener('click', onBtnUpClick);\nfunction onBtnUpClick() {\n  document.body.scrollIntoView({\n    behavior: 'smooth',\n    block: 'start',\n  });\n}\n\ndocument.addEventListener('scroll', () => {\n  if (\n    document.body.scrollTop > window.innerHeight / 2 ||\n    document.documentElement.scrollTop > window.innerHeight / 2\n  ) {\n    refs.btnUp.style.display = 'block';\n  } else {\n    refs.btnUp.style.display = 'none';\n  }\n});\n"],"names":["$i2Aqx","parcelRequire","$04jNI","loaderToggle","localStorage","getItem","fetchGenres","then","data","setItem","JSON","stringify","genres","fetchTrending","$ldBz7","renderGalleryMarkup","results","$8huCE","renderPagination","page","total_pages","finally","setTimeout","hideLoader","$5c588d2e643f1d3e$var$warningEl","document","querySelector","$5c588d2e643f1d3e$var$formEl","$5c588d2e643f1d3e$var$paginationEl","addEventListener","evt","preventDefault","$5c588d2e643f1d3e$var$query","target","elements","value","trim","classList","remove","add","length","$49c5cc8be7fdff28$var$refs","btnUp","body","scrollIntoView","behavior","block","scrollTop","window","innerHeight","documentElement","style","display"],"version":3,"file":"index.f82531d2.js.map"}