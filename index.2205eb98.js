var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},i=e.parcelRequired7c6;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in a){var i=a[e];delete a[e];var n={id:e,exports:{}};return t[e]=n,i.call(n.exports,n,n.exports),n.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){a[e]=t},e.parcelRequired7c6=i);var n=i("04jNI");function l(e){return(0,n.loaderToggle)(),fetch(`https://api.themoviedb.org/3/trending/movie/day?&api_key=d70849b39c7b399ded2dffef6ee1baa4&page=${e}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>console.log(e))).finally((()=>setTimeout((()=>{(0,n.hideLoader)()}),500)))}function r(e,t){return(0,n.loaderToggle)(),fetch(`https://api.themoviedb.org/3/search/movie?api_key=d70849b39c7b399ded2dffef6ee1baa4&language=en-US&page=${t}&include_adult=false&query=${e}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>console.log(e))).finally((()=>setTimeout((()=>{(0,n.hideLoader)()}),500)))}var s=i("ldBz7");s=i("ldBz7");const o=document.querySelector(".pagination__list"),d=document.querySelector(".pagination__btn--left"),u=document.querySelector(".pagination__btn--rigth"),c=document.querySelector(".search__input"),g=document.querySelectorAll(".pagination__btn");let p,m,f="";function h(e,t,a){let i="",[n,l]=function(e){window.innerWidth>=320&&e<3?(p=1,m=5):(p=e-2,m=e+2);return[p,m]}(e),r=a-3;window.innerWidth>=768&&e>=5&&(i+='<li class ="pagination__item" data-page="1">1</li>',i+='<li class ="pagination__item">...</li>');for(let e=n;e<=l;e+=1)i+=`<li class ="pagination__item" data-page="${e}">${e}</li>`;window.innerWidth>=768&&e>=1&&(i+='<li class ="pagination__item">...</li>',i+=`<li class ="pagination__item" data-page="${a}">${a}</li>`),window.innerWidth>=768&&e>=r&&(i=`\n    <li class ="pagination__item" data-page="1">1</li>\n    <li class ="pagination__item">...</li>\n    <li class ="pagination__item" data-page="${a-4}">${a-4}</li>\n    <li class ="pagination__item" data-page="${a-3}">${a-3}</li>\n    <li class ="pagination__item" data-page="${a-2}">${a-2}</li>\n    <li class ="pagination__item" data-page="${a-1}">${a-1}</li>\n    <li class ="pagination__item" data-page="${a}">${a}</li>\n    `),e===a?(u.disabled=!0,u.classList.add("disabled")):(u.disabled=!1,u.classList.remove("disabled")),o.innerHTML=i,u.dataset.page=e+1,d.dataset.page=e-1,function(e){1===e?(d.disabled=!0,d.classList.add("disabled")):(d.disabled=!1,d.classList.remove("disabled"))}(e),y(e)}function _(e){v();let t=e.currentTarget.dataset.page;f=c.value,""===f?(l(t).then((e=>((0,s.renderGalleryMarkup)(e.results,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(e.results)),e))).then((e=>h(e.page,e.results,e.total_pages))),y(t)):r(f,t).then((e=>((0,s.renderGalleryMarkup)(e.results,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(e.results)),e))).then((e=>h(e.page,e.results,e.total_pages)))}function y(e){const t=document.querySelector(".pagination__item.pagination__item--active");document.querySelector(`[data-page="${e}"]`).classList.add("pagination__item--active"),t&&t.classList.remove("pagination__item--active")}function v(){window.scrollTo({top:220,behavior:"smooth"})}o.addEventListener("click",(function(e){if(e.preventDefault(),v(),"LI"!==e.target.nodeName)return;let t=e.target.dataset.page;if(f=c.value,""!==f)return void r(f,t).then((e=>((0,s.renderGalleryMarkup)(e.results,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(e.results)),e))).then((e=>h(e.page,e.results,e.total_pages)));l(t).then((e=>((0,s.renderGalleryMarkup)(e.results,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(e.results)),e))).then((e=>h(e.page,e.results,e.total_pages))),y(t)})),g.forEach((e=>{e.addEventListener("click",_)}));(0,(n=i("04jNI")).loaderToggle)(),localStorage.getItem("genresData")||fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=d70849b39c7b399ded2dffef6ee1baa4&language=en-US").then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>console.log(e))).then((e=>localStorage.setItem("genresData",JSON.stringify(e.genres)))),l(1).then((e=>((0,n.loaderToggle)(),(0,s.renderGalleryMarkup)(e.results,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(e.results)),e))).then((e=>h(e.page,e.results,e.total_pages))).finally((()=>setTimeout((()=>{(0,n.hideLoader)()}),500)));s=i("ldBz7");const b=document.querySelector(".warning-notify"),w=document.querySelector("#form-search"),S=document.querySelector(".pagination__container");w.addEventListener("submit",(function(e){if(e.preventDefault(),L=e.target.elements[0].value.trim(),!L)return b.classList.remove("visually-hidden"),void setTimeout((()=>{b.classList.add("visually-hidden")}),5e3);r(L,1).then((e=>e.results.length?(S.classList.remove("visually-hidden"),(0,s.renderGalleryMarkup)(e.results,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(e.results)),e):(b.classList.remove("visually-hidden"),setTimeout((()=>{b.classList.add("visually-hidden")}),5e3),void S.classList.add("visually-hidden")))).then((e=>h(e.page,e.results,e.total_pages)))}));let L="";i("7XQqj");const q={btnUp:document.querySelector("#btn-up")};q.btnUp.addEventListener("click",(function(){document.body.scrollIntoView({behavior:"smooth",block:"start"})})),document.addEventListener("scroll",(()=>{document.body.scrollTop>window.innerHeight/2||document.documentElement.scrollTop>window.innerHeight/2?q.btnUp.style.display="block":q.btnUp.style.display="none"})),i("6DdjN"),i("iZvD9"),i("04jNI");
//# sourceMappingURL=index.2205eb98.js.map
