!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a.register("8slrw",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return e}})),a.register("7AJDX",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}})),a.register("ifqQW",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),a.register("auk6i",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(!e)return;if("string"==typeof e)return r.default(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r.default(e,t)};var n,r=(n=a("8NIkP"))&&n.__esModule?n:{default:n}})),a.register("8NIkP",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}}));var i=a("j1lrD"),o="https://api.themoviedb.org/3",l="api_key=d70849b39c7b399ded2dffef6ee1baa4";function s(e){return(0,i.loaderToggle)(),fetch("".concat(o,"/trending/movie/day?&").concat(l,"&page=").concat(e)).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).catch((function(e){return console.log(e)})).finally((function(){return setTimeout((function(){(0,i.hideLoader)()}),500)}))}function u(e,t){return(0,i.loaderToggle)(),fetch("".concat(o,"/search/movie?").concat(l,"&language=en-US&page=").concat(t,"&include_adult=false&query=").concat(e)).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).catch((function(e){return console.log(e)})).finally((function(){return setTimeout((function(){(0,i.hideLoader)()}),500)}))}var c=a("1uIgm"),d={};Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(e,t){return f.default(e)||g.default(e,t)||m.default(e,t)||p.default()};var f=y(a("8slrw")),g=y(a("7AJDX")),p=y(a("ifqQW")),m=y(a("auk6i"));function y(e){return e&&e.__esModule?e:{default:e}}c=a("1uIgm");var _,v,h=document.querySelector(".pagination__list"),b=document.querySelector(".pagination__btn--left"),w=document.querySelector(".pagination__btn--rigth"),S=document.querySelector(".search__input"),L=document.querySelectorAll(".pagination__btn"),q="";function k(t,n,r){var a="",i=e(d)(function(e){window.innerWidth>=320&&e<3?(_=1,v=5):(_=e-2,v=e+2);return[_,v]}(t),2),o=i[0],l=i[1],s=r-3;window.innerWidth>=768&&t>=5&&(a+='<li class ="pagination__item" data-page="1">1</li>',a+='<li class ="pagination__item">...</li>');for(var u=o;u<=l;u+=1)a+='<li class ="pagination__item" data-page="'.concat(u,'">').concat(u,"</li>");window.innerWidth>=768&&t>=1&&(a+='<li class ="pagination__item">...</li>',a+='<li class ="pagination__item" data-page="'.concat(r,'">').concat(r,"</li>")),window.innerWidth>=768&&t>=s&&(a='\n    <li class ="pagination__item" data-page="1">1</li>\n    <li class ="pagination__item">...</li>\n    <li class ="pagination__item" data-page="'.concat(r-4,'">').concat(r-4,'</li>\n    <li class ="pagination__item" data-page="').concat(r-3,'">').concat(r-3,'</li>\n    <li class ="pagination__item" data-page="').concat(r-2,'">').concat(r-2,'</li>\n    <li class ="pagination__item" data-page="').concat(r-1,'">').concat(r-1,'</li>\n    <li class ="pagination__item" data-page="').concat(r,'">').concat(r,"</li>\n    ")),t===r?(w.disabled=!0,w.classList.add("disabled")):(w.disabled=!1,w.classList.remove("disabled")),h.innerHTML=a,w.dataset.page=t+1,b.dataset.page=t-1,function(e){1===e?(b.disabled=!0,b.classList.add("disabled")):(b.disabled=!1,b.classList.remove("disabled"))}(t),M(t)}function I(e){O();var t=e.currentTarget.dataset.page;""===(q=S.value)?(s(t).then((function(e){return(0,c.renderGalleryMarkup)(e.results,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(e.results)),e})).then((function(e){return k(e.page,e.results,e.total_pages)})),M(t)):u(q,t).then((function(e){return(0,c.renderGalleryMarkup)(e.results,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(e.results)),e})).then((function(e){return k(e.page,e.results,e.total_pages)}))}function M(e){var t=document.querySelector(".pagination__item.pagination__item--active");document.querySelector('[data-page="'.concat(e,'"]')).classList.add("pagination__item--active"),t&&t.classList.remove("pagination__item--active")}function O(){window.scrollTo({top:220,behavior:"smooth"})}h.addEventListener("click",(function(e){if(e.preventDefault(),O(),"LI"!==e.target.nodeName)return;var t=e.target.dataset.page;if(""!==(q=S.value))return void u(q,t).then((function(e){return(0,c.renderGalleryMarkup)(e.results,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(e.results)),e})).then((function(e){return k(e.page,e.results,e.total_pages)}));s(t).then((function(e){return(0,c.renderGalleryMarkup)(e.results,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(e.results)),e})).then((function(e){return k(e.page,e.results,e.total_pages)})),M(t)})),L.forEach((function(e){e.addEventListener("click",I)}));(0,(i=a("j1lrD")).loaderToggle)(),localStorage.getItem("genresData")||fetch("".concat(o,"/genre/movie/list?").concat(l,"&language=en-US")).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).catch((function(e){return console.log(e)})).then((function(e){return localStorage.setItem("genresData",JSON.stringify(e.genres))})),s(1).then((function(e){return(0,i.loaderToggle)(),(0,c.renderGalleryMarkup)(e.results,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(e.results)),e})).then((function(e){return k(e.page,e.results,e.total_pages)})).finally((function(){return setTimeout((function(){(0,i.hideLoader)()}),500)}));c=a("1uIgm");var T=document.querySelector(".warning-notify"),j=document.querySelector("#form-search"),x=document.querySelector(".pagination__container");j.addEventListener("submit",(function(e){if(e.preventDefault(),!(E=e.target.elements[0].value.trim()))return T.classList.remove("visually-hidden"),void setTimeout((function(){T.classList.add("visually-hidden")}),5e3);u(E,1).then((function(e){return e.results.length?(x.classList.remove("visually-hidden"),(0,c.renderGalleryMarkup)(e.results,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(e.results)),e):(T.classList.remove("visually-hidden"),setTimeout((function(){T.classList.add("visually-hidden")}),5e3),void x.classList.add("visually-hidden"))})).then((function(e){return k(e.page,e.results,e.total_pages)}))}));var E="";a("7k6zZ");var N={btnUp:document.querySelector("#btn-up")};N.btnUp.addEventListener("click",(function(){document.body.scrollIntoView({behavior:"smooth",block:"start"})})),document.addEventListener("scroll",(function(){document.body.scrollTop>window.innerHeight/2||document.documentElement.scrollTop>window.innerHeight/2?N.btnUp.style.display="block":N.btnUp.style.display="none"})),a("j9iUH"),a("7tQI6"),a("j1lrD")}();
//# sourceMappingURL=index.3cb832eb.js.map
