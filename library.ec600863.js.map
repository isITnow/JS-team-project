{"mappings":"iiBACAA,EAAA,S,+BCAAC,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQE,QACR,SAAiBC,GAEb,OAAOA,GAAOA,EAAIC,cAAgBC,OAAS,gBAAkBF,G,6CCE3DG,G,aADcC,SAASC,cAAc,kBAC5BD,SAASE,iBAAiB,qBACnCC,EAAcH,SAASC,cAAc,kBACrCG,EAAYJ,SAASC,cAAc,gBACnCI,EAAiBL,SAASC,cAAc,0BACxCK,EAAUN,SAASC,cAAc,iBAShC,SAASM,I,IAAoBC,EAAAC,UAAAC,OAAA,YAAAD,UAAA,GAAQA,UAAA,GAAD,EAGzC,GAFAN,EAAYQ,UAAUC,IAAI,gBAC1BR,EAAUO,UAAUE,OAAO,gBACtBC,aAAaC,QAAQ,iBAA1B,CAIA,IAAMC,EAA4BC,KAAKC,MACrCJ,aAAaC,QAAQ,kBAEnBI,EAAcC,KAAKC,KAAKL,EAA0BN,OAAS,GAC/DY,QAAQC,SAAsB,IAAXJ,EAAW,YAAlBK,EAAA/B,EAAA,CAAO0B,IACnB,IAAIM,EAAyBC,EAC3BlB,EACAW,EACAH,GAEFM,QAAQC,IAAIE,IACZ,EAAAE,EAAAC,qBAAoBH,EAAwB,iBAC5C,EAAAI,EAAAC,kBAAiBtB,EAAMiB,EAAwBN,QAf7C,EAAAQ,EAAAI,sBAiDJ,SAASC,EAAaC,GAEpB1B,EADW2B,OAAOD,EAAEE,cAAcC,QAAQ5B,OAY5C,SAASkB,EAAeW,EAAMC,EAAaC,GACzC,IAAIC,EACFD,EAA0B7B,OAAS,EAAI6B,EAA0B7B,OAAS,EACxE+B,EAAQ,EACRJ,IAASC,GAAwB,IAATD,GAC1BI,EAAQ,GAAKJ,EAAO,GACpBG,EAAMD,EAA2B7B,OAAS,EAAK+B,EAC/CnB,QAAQC,IAAIiB,EAAKD,EAA0B7B,OAAS,EAAG+B,IAC9CJ,EAAO,IAEhBG,GADAC,EAAQ,GAAKJ,EAAO,IACN,GAKhB,IAFA,IAAIK,EAAM,GAEDC,EAAIF,EAAOE,EAAIH,EAAKG,IAC3BD,EAAIE,KAAKL,EAA0BI,IAIrC,OAFArB,QAAQC,IAAIkB,EAAOD,EAAKD,EAA0B7B,QAClDY,QAAQC,IAAIc,EAAMC,GACXI,EA7FTrC,EAAewC,iBAAiB,SAgEhC,SAA6BZ,GAC3B,GAA0B,OAAtBA,EAAEa,OAAOC,SACX,OAEF,IAAIvC,EAAOyB,EAAEa,OAAOV,QAAQ5B,KAC5Bc,QAAQC,IAAIU,EAAEa,OAAOV,QAAQ5B,MAC7BD,EAAoBC,MArEtBF,EAAQuC,iBAAiB,SA4BzB,SAAuBZ,GACrB,GAAIA,EAAEa,OAAOnC,UAAUqC,SAAS,iBAAkB,CAEhD,GADA1B,QAAQC,IAAI,UAAWU,EAAEa,QACrBhC,aAAaC,QAAQ,iBAAkB,CACzC,IAAMkC,EAAgBhC,KAAKC,MAAMJ,aAAaC,QAAQ,mBACtD,EAAAY,EAAAC,qBAAoBqB,EAAe,qBAEnC,EAAAtB,EAAAI,sBAGGE,EAAEa,OAAOnC,UAAUqC,SAAS,kBAC/Bf,EAAEa,OAAOnC,UAAUC,IAAI,gBACvBR,EAAUO,UAAUE,OAAO,iBAI/B,GAAIoB,EAAEa,OAAOnC,UAAUqC,SAAS,eAAgB,CAC9C,GAAIlC,aAAaC,QAAQ,eAAgB,CACvC,IAAMmC,EAAcjC,KAAKC,MAAMJ,aAAaC,QAAQ,iBACpD,EAAAY,EAAAC,qBAAoBsB,EAAa,mBAEjC,EAAAvB,EAAAI,sBAGGE,EAAEa,OAAOnC,UAAUqC,SAAS,kBAC/Bf,EAAEa,OAAOnC,UAAUC,IAAI,gBACvBT,EAAYQ,UAAUE,OAAO,qBApDnCd,EAAOoD,SAAQ,SAAAC,GACbA,EAAIP,iBAAiB,QAASb,MFZhCzB,I","sources":["src/library.js","node_modules/@swc/helpers/lib/_type_of.js","src/js/library/libraryFunctions.js"],"sourcesContent":["// import './js/pagination/pagination';\nimport './js/library/local-storage-theme';\nimport './js/spinner';\nimport './js/modal/modal-footer';\nimport './js/library/libraryFunctions';\nimport { libraryMovieCreator } from './js/library/libraryFunctions';\n\nlibraryMovieCreator();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _typeof;\nfunction _typeof(obj) {\n    \"@swc/helpers - typeof\";\n    return obj && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n}\n;\n","import {\n  renderGalleryMarkup,\n  renderDefaulMarkup,\n} from '../home/renderGalleryMarkup';\n\nimport { renderMovieMarkup } from '../renderModal';\nimport '../pagination/pagination';\nimport { renderPagination } from '../pagination/pagination';\nconst galleryList = document.querySelector('.gallery__list');\nconst myBtns = document.querySelectorAll('.pagination__btn');\nconst WATCHED_BTN = document.querySelector('.js-watchedBtn');\nconst QUEUE_BTN = document.querySelector('.js-queueBtn');\nconst paginationList = document.querySelector('.pagination__container');\nconst btnsLib = document.querySelector('.buttons-list');\n\npaginationList.addEventListener('click', onClickMyPagination);\nbtnsLib.addEventListener('click', onLibBtnClick);\n\nmyBtns.forEach(btn => {\n  btn.addEventListener('click', onClickMyBtn);\n});\n\nexport function libraryMovieCreator(page = 1) {\n  WATCHED_BTN.classList.add('js-activeBtn');\n  QUEUE_BTN.classList.remove('js-activeBtn');\n  if (!localStorage.getItem('watchedMovies')) {\n    renderDefaulMarkup();\n    return;\n  }\n  const allItemsFromLocaleStorage = JSON.parse(\n    localStorage.getItem('watchedMovies')\n  );\n  let total_pages = Math.ceil(allItemsFromLocaleStorage.length / 9);\n  console.log(typeof total_pages);\n  let itemsFromLocaleStorage = getItemsByPage(\n    page,\n    total_pages,\n    allItemsFromLocaleStorage\n  );\n  console.log(itemsFromLocaleStorage);\n  renderGalleryMarkup(itemsFromLocaleStorage, 'data-watched');\n  renderPagination(page, itemsFromLocaleStorage, total_pages);\n}\n\nfunction onLibBtnClick(e) {\n  if (e.target.classList.contains('js-watchedBtn')) {\n    console.log('WATCHED', e.target);\n    if (localStorage.getItem('watchedMovies')) {\n      const parsedWatched = JSON.parse(localStorage.getItem('watchedMovies'));\n      renderGalleryMarkup(parsedWatched, 'data-watched');\n    } else {\n      renderDefaulMarkup();\n    }\n    /////// watchedBtn class toggle ///////////\n    if (!e.target.classList.contains('js-activeBtn')) {\n      e.target.classList.add('js-activeBtn');\n      QUEUE_BTN.classList.remove('js-activeBtn');\n    }\n  }\n\n  if (e.target.classList.contains('js-queueBtn')) {\n    if (localStorage.getItem('queueMovies')) {\n      const parsedQueue = JSON.parse(localStorage.getItem('queueMovies'));\n      renderGalleryMarkup(parsedQueue, 'data-queue');\n    } else {\n      renderDefaulMarkup();\n    }\n    /////// queueBtn class toggle ///////////\n    if (!e.target.classList.contains('js-activeBtn')) {\n      e.target.classList.add('js-activeBtn');\n      WATCHED_BTN.classList.remove('js-activeBtn');\n    }\n  }\n}\n\nfunction onClickMyBtn(e) {\n  let page = Number(e.currentTarget.dataset.page);\n  libraryMovieCreator(page);\n}\nfunction onClickMyPagination(e) {\n  if (e.target.nodeName !== 'LI') {\n    return;\n  }\n  let page = e.target.dataset.page;\n  console.log(e.target.dataset.page);\n  libraryMovieCreator(page);\n}\n\nfunction getItemsByPage(page, total_pages, allItemsFromLocaleStorage) {\n  let end =\n    allItemsFromLocaleStorage.length < 9 ? allItemsFromLocaleStorage.length : 9;\n  let start = 0;\n  if (page === total_pages && page !== 1) {\n    start = 9 * (page - 1);\n    end = (allItemsFromLocaleStorage.length % 9) + start;\n    console.log(end, allItemsFromLocaleStorage.length % 9, start);\n  } else if (page > 1) {\n    start = 9 * (page - 1);\n    end = start + 9;\n  }\n\n  let arr = [];\n\n  for (let i = start; i < end; i++) {\n    arr.push(allItemsFromLocaleStorage[i]);\n  }\n  console.log(start, end, allItemsFromLocaleStorage.length);\n  console.log(page, total_pages);\n  return arr;\n\n  function getItemsByPage(page, total_pages, allItemsFromLocaleStorage) {\n    console.log(allItemsFromLocaleStorage);\n    let end = 9;\n    let start = 0;\n    if (page === total_pages && page !== 1) {\n      start = start + end;\n      end = (allItemsFromLocaleStorage.length % 9) + end;\n    }\n    let arr = [];\n    console.log(start, end, allItemsFromLocaleStorage.length);\n    for (let i = start; i < end; i++) {\n      arr.push(allItemsFromLocaleStorage[i]);\n    }\n    return arr;\n  }\n}\n"],"names":["parcelRequire","Object","defineProperty","$f59351132b4b3cee$exports","value","default","obj","constructor","Symbol","$d82793e3178ffec1$var$myBtns","document","querySelector","querySelectorAll","$d82793e3178ffec1$var$WATCHED_BTN","$d82793e3178ffec1$var$QUEUE_BTN","$d82793e3178ffec1$var$paginationList","$d82793e3178ffec1$var$btnsLib","$d82793e3178ffec1$export$4a2b9da746179d46","page","arguments","length","classList","add","remove","localStorage","getItem","allItemsFromLocaleStorage","JSON","parse","total_pages","Math","ceil","console","log","$parcel$interopDefault","itemsFromLocaleStorage","$d82793e3178ffec1$var$getItemsByPage","$1uIgm","renderGalleryMarkup","$bOuzt","renderPagination","renderDefaulMarkup","$d82793e3178ffec1$var$onClickMyBtn","e","Number","currentTarget","dataset","page1","total_pages1","allItemsFromLocaleStorage1","end1","start1","arr1","i1","push","addEventListener","target","nodeName","contains","parsedWatched","parsedQueue","forEach","btn"],"version":3,"file":"library.ec600863.js.map"}