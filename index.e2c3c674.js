!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a.register("8slrw",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return e}})),a.register("7AJDX",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}})),a.register("ifqQW",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),a.register("auk6i",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(!e)return;if("string"==typeof e)return r.default(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r.default(e,t)};var n,r=(n=a("8NIkP"))&&n.__esModule?n:{default:n}})),a.register("8NIkP",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}}));var i=a("5YnpJ"),o=(i=a("5YnpJ"),a("1uIgm")),l={};Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,t){return s.default(e)||u.default(e,t)||d.default(e,t)||c.default()};var s=f(a("8slrw")),u=f(a("7AJDX")),c=f(a("ifqQW")),d=f(a("auk6i"));function f(e){return e&&e.__esModule?e:{default:e}}i=a("5YnpJ"),o=a("1uIgm"),i=a("5YnpJ");var p,g,m=document.querySelector(".pagination__list"),y=document.querySelector(".pagination__btn--left"),_=document.querySelector(".pagination__btn--rigth"),v=document.querySelector(".search__input"),h=document.querySelectorAll(".pagination__btn"),b="";function S(t,n,r){var a="",i=e(l)(function(e){window.innerWidth>=320&&e<3?(p=1,g=5):(p=e-2,g=e+2);return[p,g]}(t),2),o=i[0],s=i[1],u=r-3;window.innerWidth>=768&&t>=5&&(a+='<li class ="pagination__item" data-page="1">1</li>',a+='<li class ="pagination__item">...</li>');for(var c=o;c<=s;c+=1)a+='<li class ="pagination__item" data-page="'.concat(c,'">').concat(c,"</li>");window.innerWidth>=768&&t>=1&&(a+='<li class ="pagination__item">...</li>',a+='<li class ="pagination__item" data-page="'.concat(r,'">').concat(r,"</li>")),window.innerWidth>=768&&t>=u&&(a='\n    <li class ="pagination__item" data-page="1">1</li>\n    <li class ="pagination__item">...</li>\n    <li class ="pagination__item" data-page="'.concat(r-4,'">').concat(r-4,'</li>\n    <li class ="pagination__item" data-page="').concat(r-3,'">').concat(r-3,'</li>\n    <li class ="pagination__item" data-page="').concat(r-2,'">').concat(r-2,'</li>\n    <li class ="pagination__item" data-page="').concat(r-1,'">').concat(r-1,'</li>\n    <li class ="pagination__item" data-page="').concat(r,'">').concat(r,"</li>\n    ")),t===r?(_.disabled=!0,_.classList.add("disabled")):(_.disabled=!1,_.classList.remove("disabled")),m.innerHTML=a,_.dataset.page=t+1,y.dataset.page=t-1,function(e){1===e?(y.disabled=!0,y.classList.add("disabled")):(y.disabled=!1,y.classList.remove("disabled"))}(t),q(t)}function w(e){L();var t=e.currentTarget.dataset.page;""===(b=v.value)?((0,i.fetchTrending)(t).then((function(e){return(0,o.renderGalleryMarkup)(e.results,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(e.results)),e})).then((function(e){return S(e.page,e.results,e.total_pages)})),q(t)):(0,i.fetсhByQuery)(b,t).then((function(e){return(0,o.renderGalleryMarkup)(e.results,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(e.results)),e})).then((function(e){return S(e.page,e.results,e.total_pages)}))}function q(e){var t=document.querySelector(".pagination__item.pagination__item--active");document.querySelector('[data-page="'.concat(e,'"]')).classList.add("pagination__item--active"),t&&t.classList.remove("pagination__item--active")}function L(){window.scrollTo({top:220,behavior:"smooth"})}m.addEventListener("click",(function(e){if(e.preventDefault(),L(),"LI"!==e.target.nodeName)return;var t=e.target.dataset.page;if(""!==(b=v.value))return void(0,i.fetсhByQuery)(b,t).then((function(e){return(0,o.renderGalleryMarkup)(e.results,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(e.results)),e})).then((function(e){return S(e.page,e.results,e.total_pages)}));(0,i.fetchTrending)(t).then((function(e){return(0,o.renderGalleryMarkup)(e.results,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(e.results)),e})).then((function(e){return S(e.page,e.results,e.total_pages)})),q(t)})),h.forEach((function(e){e.addEventListener("click",w)}));var I=a("j1lrD");(0,I.loaderToggle)(),localStorage.getItem("genresData")||(0,i.fetchGenres)().then((function(e){return localStorage.setItem("genresData",JSON.stringify(e.genres))})),(0,i.fetchTrending)(1).then((function(e){return(0,I.loaderToggle)(),(0,o.renderGalleryMarkup)(e.results,"data-trending"),localStorage.setItem("popularFilms",JSON.stringify(e.results)),e})).then((function(e){return S(e.page,e.results,e.total_pages)})).finally((function(){return setTimeout((function(){(0,I.hideLoader)()}),500)}));i=a("5YnpJ"),o=a("1uIgm");var M=document.querySelector(".warning-notify"),O=document.querySelector("#form-search"),T=document.querySelector(".pagination__container");O.addEventListener("submit",(function(e){if(e.preventDefault(),!(k=e.target.elements[0].value.trim()))return M.classList.remove("visually-hidden"),void setTimeout((function(){M.classList.add("visually-hidden")}),5e3);(0,i.fetсhByQuery)(k,1).then((function(e){return e.results.length?(T.classList.remove("visually-hidden"),(0,o.renderGalleryMarkup)(e.results,"data-query"),localStorage.setItem("queryFilms",JSON.stringify(e.results)),e):(M.classList.remove("visually-hidden"),setTimeout((function(){M.classList.add("visually-hidden")}),5e3),void T.classList.add("visually-hidden"))})).then((function(e){return S(e.page,e.results,e.total_pages)}))}));var k="";a("7k6zZ");var x={btnUp:document.querySelector("#btn-up")};x.btnUp.addEventListener("click",(function(){document.body.scrollIntoView({behavior:"smooth",block:"start"})})),document.addEventListener("scroll",(function(){document.body.scrollTop>window.innerHeight/2||document.documentElement.scrollTop>window.innerHeight/2?x.btnUp.style.display="block":x.btnUp.style.display="none"})),a("j9iUH"),a("7tQI6"),a("j1lrD")}();
//# sourceMappingURL=index.e2c3c674.js.map
